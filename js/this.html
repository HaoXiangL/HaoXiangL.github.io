<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>关于this | Lesions&#39; Blog</title>
    <meta name="description" content="">
    <link rel="icon" href="/123.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.f780b818.css" as="style"><link rel="preload" href="/assets/js/app.85a488a3.js" as="script"><link rel="preload" href="/assets/js/2.d553369a.js" as="script"><link rel="preload" href="/assets/js/7.07621532.js" as="script"><link rel="prefetch" href="/assets/js/10.041aa8e6.js"><link rel="prefetch" href="/assets/js/11.fbd63a12.js"><link rel="prefetch" href="/assets/js/12.33651973.js"><link rel="prefetch" href="/assets/js/13.55d0add0.js"><link rel="prefetch" href="/assets/js/14.48bb2bd4.js"><link rel="prefetch" href="/assets/js/15.261cf851.js"><link rel="prefetch" href="/assets/js/16.f9b239cd.js"><link rel="prefetch" href="/assets/js/17.4a13c5d4.js"><link rel="prefetch" href="/assets/js/18.505abb15.js"><link rel="prefetch" href="/assets/js/19.1f4b87ac.js"><link rel="prefetch" href="/assets/js/20.bfc04645.js"><link rel="prefetch" href="/assets/js/21.29ce6735.js"><link rel="prefetch" href="/assets/js/3.ced11664.js"><link rel="prefetch" href="/assets/js/4.d3b37e99.js"><link rel="prefetch" href="/assets/js/5.1d602839.js"><link rel="prefetch" href="/assets/js/6.e2372118.js"><link rel="prefetch" href="/assets/js/8.f6ab9117.js"><link rel="prefetch" href="/assets/js/9.1c948de5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f780b818.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/123.jpg" alt="Lesions' Blog" class="logo"> <span class="site-name can-hide">Lesions' Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">概述</a></div><div class="nav-item"><a href="/js/js.html" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue.html" class="nav-link">Vue 🏹</a></li><li class="dropdown-item"><!----> <a href="/vuex/vuex.html" class="nav-link">Vuex 💾</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">Vue-router 🔎</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书" class="dropdown-title"><span class="title">读书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/dontkownjs.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-item"><!----> <a href="/read/heighprogramdesign/" class="nav-link">JavaScript高级程序设计(第三版)</a></li></ul></div></div><div class="nav-item"><a href="/about.html" class="nav-link">关于</a></div> <a href="https://github.com/HaoXiangL/HaoXiangL.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">概述</a></div><div class="nav-item"><a href="/js/js.html" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue.html" class="nav-link">Vue 🏹</a></li><li class="dropdown-item"><!----> <a href="/vuex/vuex.html" class="nav-link">Vuex 💾</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">Vue-router 🔎</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="读书" class="dropdown-title"><span class="title">读书</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/dontkownjs.html" class="nav-link">你不知道的JavaScript(上)</a></li><li class="dropdown-item"><!----> <a href="/read/heighprogramdesign/" class="nav-link">JavaScript高级程序设计(第三版)</a></li></ul></div></div><div class="nav-item"><a href="/about.html" class="nav-link">关于</a></div> <a href="https://github.com/HaoXiangL/HaoXiangL.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Js使用总结</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js/js.html" class="sidebar-link">概述</a></li><li><a href="/js/this.html" class="active sidebar-link">this详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js/this.html#把函数作为值传入回调函数" class="sidebar-link">把函数作为值传入回调函数</a></li><li class="sidebar-sub-header"><a href="/js/this.html#react中的this技巧" class="sidebar-link">react中的this技巧</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="关于this"><a href="#关于this" class="header-anchor">#</a> 关于this</h1> <h2 id="把函数作为值传入回调函数"><a href="#把函数作为值传入回调函数" class="header-anchor">#</a> 把函数作为值传入回调函数</h2> <p>我们用一个隐式绑定的this来说明这个情况</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
name<span class="token punctuation">:</span> <span class="token string">'Lesion'</span><span class="token punctuation">,</span>
<span class="token function-variable function">show</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 'this' 指向 obj</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

obj<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Lesion </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>这种由<code>obj</code>定义函数的方式，我们称之为 <strong>方法</strong>。在上述js代码中，this隐式绑定到obj中，所以this指向obj。</p> <p>问题在于，如果我将<code>obj.show</code>赋值给其他变量(或者回调函数)，就会发生隐式绑定丢失的情况。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ...</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'opp~,this is window'</span>
<span class="token keyword">var</span> globalShow <span class="token operator">=</span> obj<span class="token punctuation">.</span>show <span class="token comment">//我将这个方法赋值给一个全局变量</span>
<span class="token function">globalShow</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// opp~,this is window</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>在上面的例子里，当我们调用 <code>globalShow()</code> 时，我们没有指定一个具体的上下文对象。这是一个没有所有者对象的纯函数调用。在这种情况下，<code>show()</code> 内部的 this 值回退到默认绑定。现在这个 this 指向全局对象，在严格模式下，它指向 undefined。</p> <p>考虑到这种情况的赋值会改变this的指向，我们把<code>show</code>赋值给<code>setTimeout</code>作为回调函数，应该也会发生这种情况。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//setTimeout 的虚拟实现</span>
<span class="token keyword">function</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token parameter">callback<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

   <span class="token comment">//等待 'delay' 数个毫秒</span>

   <span class="token function">callback</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span> obj<span class="token punctuation">.</span>show<span class="token punctuation">,</span> <span class="token number">1000</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>当调用setTimeout时，JavaScript在内部会把<code>obj.show</code>赋值给<code>callback</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>callback <span class="token operator">=</span> obj<span class="token punctuation">.</span>display<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><strong>如果把这种情况联想到React中的this丢失，这样就很好理解为什么React中需要bind()所以定义的函数(或者使用箭头函数)</strong></p> <p>我们使用一个纯JavaScript的代码来 <strong>模拟</strong>React的行为。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">class</span> <span class="token class-name">Foo</span> <span class="token punctuation">{</span>
  <span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
  <span class="token punctuation">}</span>

  <span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token string">'Lesion'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">show</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Lesion</span>

<span class="token comment">//下面的赋值操作模拟了上下文的丢失。 </span>
<span class="token comment">//与实际在 React Component 中将处理程序作为 callback 参数传递相似。</span>
<span class="token keyword">var</span> display <span class="token operator">=</span> foo<span class="token punctuation">.</span>show<span class="token punctuation">;</span> 
<span class="token function">display</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TypeError: this is undefined</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>由于类的声明是在 <strong>严格模式</strong>中执行，所以我们得到undefined而并非window</p> <blockquote><p>事件处理程序方法会丢失其隐式绑定的上下文。当事件被触发并且处理程序被调用时，this的值会回退到默认绑定，即值为 undefined，这是因为类声明和原型方法是以严格模式运行。</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//这里的this就会丢失</span>
<span class="token operator">&lt;</span>button type<span class="token operator">=</span><span class="token string">&quot;button&quot;</span> onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>Click Me<span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h2 id="react中的this技巧"><a href="#react中的this技巧" class="header-anchor">#</a> react中的this技巧</h2> <p>由于上述的this隐患是JavaScript语言本身存在的问题，react框架在避免或者说是改进上对这个遗留问题做了很多工作。</p> <h3 id="方法一：react-createclass-自动绑定"><a href="#方法一：react-createclass-自动绑定" class="header-anchor">#</a> 方法一：React.createClass 自动绑定</h3> <p>React.createClass 创建的组件，可以自动绑定 this。也就是说，this 这个关键字会自动绑定在组件实例上面。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// React.createClass中这样的调用是可以生效的</span>
<span class="token comment">// 因为你已经绑定了它</span>
onChange <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleChange<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>但是。。。官方已经推荐使用 class 声明组件或使用 functional 无状态组件。这种方法已经不太适合我们。</p> <h3 id="方法二：渲染时绑定"><a href="#方法二：渲染时绑定" class="header-anchor">#</a> 方法二：渲染时绑定</h3> <p>我们假定所有的组件都采取 ES6 classes 方式声明。这种情况下，this 无法自动绑定。一个常见的解决方案便是：</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>onChange <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在jsx中调用时 <strong>显式绑定</strong>，这种方法看上去不需要新增新的代码块，只需要在调用时添加bind方法进行绑定。但是它存在一个很大的隐患：<strong>当组件每次重新渲染时，都会有一个新的函数创建</strong>。这样导致每次修改<code>state</code>或者更新dom的时候，都要新建一个函数。但其实在真正开发中，除了大型组件，基本上性能不会影响太大。因为它也是 <strong>比较常用</strong>的一种方法。</p> <h3 id="方法三：箭头函数绑定"><a href="#方法三：箭头函数绑定" class="header-anchor">#</a> 方法三：箭头函数绑定</h3> <p>基于ES6的箭头函数，隐式绑定this后不会被更改。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>onChange <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>当然，也与第二种方法一样，它同样存在潜在的性能问题。
下面将要介绍的两种方法，可以有效规避不必要的性能消耗。</p> <h3 id="方法四：constructor-内绑定"><a href="#方法四：constructor-内绑定" class="header-anchor">#</a> 方法四：Constructor 内绑定</h3> <p>constructor 方法是类的默认方法，通过new命令生成对象实例时，自动调用该方法。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">super</span><span class="token punctuation">(</span>props<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>handleChange <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">handleChange</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这种方式往往被推荐为“最佳实践”,我在使用react中也是常用这种方法。</p> <p>但是这种方法需要在constructor中添加一行代码用于绑定，可读性和可维护性很差。</p> <p>同时，我们知道在 constructor 声明的方法不会存在实例的原型上，而属于实例本身的方法。每个实例都有同样一个 handleChange，这本身也是一种重复和浪费。</p> <h3 id="方法五：class-属性中使用-和箭头函数"><a href="#方法五：class-属性中使用-和箭头函数" class="header-anchor">#</a> 方法五：Class 属性中使用 = 和箭头函数</h3> <p>这个方法依赖于 ES next 的新特性，请参考<a href="https://tc39.es/proposal-class-public-fields/" target="_blank" rel="noopener noreferrer">tc 39: Public Class Fields<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <p>tc39是一个推动 JavaScript 发展的委员会，由各个主流浏览器厂商的代表构成。它们负责制定ECMAScript标准，标准生成的流程，并实现。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 官网例子</span>
<span class="token keyword">class</span> <span class="token class-name">LoggingButton</span> <span class="token keyword">extends</span> <span class="token class-name">React<span class="token punctuation">.</span>Component</span> <span class="token punctuation">{</span>
  <span class="token comment">// 此语法确保 `handleClick` 内的 `this` 已被绑定。</span>
  <span class="token comment">// 注意: 这是 *实验性* 语法。</span>
  <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'this is:'</span><span class="token punctuation">,</span> <span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span>
      <span class="token operator">&lt;</span>button onClick<span class="token operator">=</span><span class="token punctuation">{</span><span class="token keyword">this</span><span class="token punctuation">.</span>handleClick<span class="token punctuation">}</span><span class="token operator">&gt;</span>
        Click me
      <span class="token operator">&lt;</span><span class="token operator">/</span>button<span class="token operator">&gt;</span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>我们只需要直接在class中定义一个函数表达式，然后使用箭头函数即可绑定this。它需要安装<code>@ babel / plugin-proposal-class-properties</code>才能使用，如果在<code>create-react-app</code>生成的项目会默认开启这个babel包。</p> <p>目前这个方法确实是最优雅的实现<code>React</code>中this绑定的解决方法，但由于是还在stage-1阶段，只能是实验使用，官网上还是推荐 <strong>方法四</strong>。个人认为 <strong>方法三</strong>和 <strong>方法五</strong>的实践更为舒适。</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HaoXiangL/HaoXiangL.github.io/edit/master/js/this.md" target="_blank" rel="noopener noreferrer">编辑该博客 →</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js/js.html" class="prev">概述</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.85a488a3.js" defer></script><script src="/assets/js/2.d553369a.js" defer></script><script src="/assets/js/7.07621532.js" defer></script>
  </body>
</html>
