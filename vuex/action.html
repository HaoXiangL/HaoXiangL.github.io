<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Action | Lesions&#39; Blog</title>
    <meta name="description" content="">
    <link rel="icon" href="/123.jpg">
    
    <link rel="preload" href="/assets/css/0.styles.f780b818.css" as="style"><link rel="preload" href="/assets/js/app.85a488a3.js" as="script"><link rel="preload" href="/assets/js/2.d553369a.js" as="script"><link rel="preload" href="/assets/js/16.f9b239cd.js" as="script"><link rel="prefetch" href="/assets/js/10.041aa8e6.js"><link rel="prefetch" href="/assets/js/11.fbd63a12.js"><link rel="prefetch" href="/assets/js/12.33651973.js"><link rel="prefetch" href="/assets/js/13.55d0add0.js"><link rel="prefetch" href="/assets/js/14.48bb2bd4.js"><link rel="prefetch" href="/assets/js/15.261cf851.js"><link rel="prefetch" href="/assets/js/17.4a13c5d4.js"><link rel="prefetch" href="/assets/js/18.505abb15.js"><link rel="prefetch" href="/assets/js/19.1f4b87ac.js"><link rel="prefetch" href="/assets/js/20.bfc04645.js"><link rel="prefetch" href="/assets/js/21.29ce6735.js"><link rel="prefetch" href="/assets/js/3.ced11664.js"><link rel="prefetch" href="/assets/js/4.d3b37e99.js"><link rel="prefetch" href="/assets/js/5.1d602839.js"><link rel="prefetch" href="/assets/js/6.e2372118.js"><link rel="prefetch" href="/assets/js/7.07621532.js"><link rel="prefetch" href="/assets/js/8.f6ab9117.js"><link rel="prefetch" href="/assets/js/9.1c948de5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.f780b818.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/123.jpg" alt="Lesions' Blog" class="logo"> <span class="site-name can-hide">Lesions' Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">æ¦‚è¿°</a></div><div class="nav-item"><a href="/js/js.html" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue.html" class="nav-link">Vue ğŸ¹</a></li><li class="dropdown-item"><!----> <a href="/vuex/vuex.html" class="nav-link">Vuex ğŸ’¾</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">Vue-router ğŸ”</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¯»ä¹¦" class="dropdown-title"><span class="title">è¯»ä¹¦</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/dontkownjs.html" class="nav-link">ä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)</a></li><li class="dropdown-item"><!----> <a href="/read/heighprogramdesign/" class="nav-link">JavaScripté«˜çº§ç¨‹åºè®¾è®¡(ç¬¬ä¸‰ç‰ˆ)</a></li></ul></div></div><div class="nav-item"><a href="/about.html" class="nav-link">å…³äº</a></div> <a href="https://github.com/HaoXiangL/HaoXiangL.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">æ¦‚è¿°</a></div><div class="nav-item"><a href="/js/js.html" class="nav-link">JavaScript</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Vue" class="dropdown-title"><span class="title">Vue</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/vue.html" class="nav-link">Vue ğŸ¹</a></li><li class="dropdown-item"><!----> <a href="/vuex/vuex.html" class="nav-link">Vuex ğŸ’¾</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">Vue-router ğŸ”</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="è¯»ä¹¦" class="dropdown-title"><span class="title">è¯»ä¹¦</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/read/dontkownjs.html" class="nav-link">ä½ ä¸çŸ¥é“çš„JavaScript(ä¸Š)</a></li><li class="dropdown-item"><!----> <a href="/read/heighprogramdesign/" class="nav-link">JavaScripté«˜çº§ç¨‹åºè®¾è®¡(ç¬¬ä¸‰ç‰ˆ)</a></li></ul></div></div><div class="nav-item"><a href="/about.html" class="nav-link">å…³äº</a></div> <a href="https://github.com/HaoXiangL/HaoXiangL.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>æ¦‚è¿°</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex/vuex.html" class="sidebar-link">Vuexæ˜¯ä»€ä¹ˆ</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>æ ¸å¿ƒæ¦‚å¿µ</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/vuex/state.html" class="sidebar-link">State</a></li><li><a href="/vuex/getter.html" class="sidebar-link">Getter</a></li><li><a href="/vuex/mutation.html" class="sidebar-link">Mutation</a></li><li><a href="/vuex/action.html" class="active sidebar-link">Action</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex/action.html#å¦‚ä½•è§¦å‘action" class="sidebar-link">å¦‚ä½•è§¦å‘Action</a></li><li class="sidebar-sub-header"><a href="/vuex/action.html#åœ¨ç»„ä»¶ä¸­è§¦å‘action" class="sidebar-link">åœ¨ç»„ä»¶ä¸­è§¦å‘Action</a></li><li class="sidebar-sub-header"><a href="/vuex/action.html#ç»„åˆ-action" class="sidebar-link">ç»„åˆ Action</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="action"><a href="#action" class="header-anchor">#</a> Action</h1> <p><code>action</code>æ˜¯ç”¨ä½œæäº¤å¼‚æ­¥æ”¹å˜<code>store</code>çš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®šä¹‰ä¸Šä¸<code>mutation</code>ç›¸åŒã€‚</p> <p>ä¸åŒçš„æ˜¯:</p> <ul><li><code>action</code>æäº¤çš„æ˜¯ä¸€ä¸ª<code>mutation</code></li> <li><code>action</code>å¯ä»¥è¿›è¡Œå¼‚æ­¥æ“ä½œ</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token keyword">new</span> <span class="token class-name">Vuex<span class="token punctuation">.</span>Store</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
state<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
mutations<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">add</span><span class="token punctuation">(</span><span class="token parameter">state<span class="token punctuation">,</span>payload</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    state<span class="token punctuation">.</span>count <span class="token operator">+=</span> payload
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span>
actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">actionAdd</span><span class="token punctuation">(</span><span class="token parameter">context</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    context<span class="token punctuation">.</span><span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p><code>Action</code>æ¥å—ä¸€ä¸ªç±»ä¼¼<code>store</code>çš„å¯¹è±¡(context)ï¼Œå› æ­¤ä½ å¯ä»¥åƒ<code>store.commit('mutationsKey')</code>ä¸€æ ·ï¼Œä½¿ç”¨<code>context.commit()</code>æ–¹æ³•å»æäº¤ä¸€ä¸ªmutationï¼Œ<strong>ä½†å®ƒå¹¶ä¸æ˜¯<code>store</code>æœ¬èº«</strong>ã€‚</p> <p>å»ºè®®åœ¨ç¼–å†™actionæ—¶ä½¿ç”¨<code>å‚æ•°è§£æ„</code>çš„æ–¹å¼å»å¼•å…¥ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æ“ä½œå¤šæ¬¡commit</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function">actionAdd</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>context<span class="token punctuation">}</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="å¦‚ä½•è§¦å‘action"><a href="#å¦‚ä½•è§¦å‘action" class="header-anchor">#</a> å¦‚ä½•è§¦å‘Action</h2> <p>å®˜ç½‘å°†è°ƒç”¨<code>action</code>çš„æ–¹æ³•å®šä¹‰ä¸º <strong>åˆ†å‘</strong>ï¼Œä½¿ç”¨<code>store.dispatch</code>è§¦å‘ã€‚</p> <p>ç”±äº<code>mutation</code>é™åˆ¶å¿…é¡»ä½¿ç”¨åŒæ­¥æ‰§è¡Œæ–¹å¼ï¼ŒActionä¸ºäº†è¡¥å……è¿™ç§ä¸è¶³ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨actionä¸­ä¸å—é™åˆ¶çš„ä½¿ç”¨ <strong>å¼‚æ­¥</strong>æ“ä½œã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
<span class="token function">actionAdd</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'add'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Actions æ”¯æŒåŒæ ·çš„ <strong>è½½è·æ–¹å¼</strong>å’Œ <strong>å¯¹è±¡æ–¹å¼</strong>è¿›è¡Œåˆ†å‘ï¼š</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// ä»¥è½½è·(payload)å½¢å¼åˆ†å‘</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'actionAdd'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
  amount<span class="token punctuation">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">// ä»¥å¯¹è±¡å½¢å¼åˆ†å‘</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token punctuation">:</span> <span class="token string">'actionAdd'</span><span class="token punctuation">,</span>
  amount<span class="token punctuation">:</span> <span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="åœ¨ç»„ä»¶ä¸­è§¦å‘action"><a href="#åœ¨ç»„ä»¶ä¸­è§¦å‘action" class="header-anchor">#</a> åœ¨ç»„ä»¶ä¸­è§¦å‘Action</h2> <p>è·Ÿmutationç›¸ä¼¼ï¼Œåœ¨ç»„ä»¶ä¸­ä¹Ÿæ˜¯é€šè¿‡<code>this.$store.dispatch('xxx')</code>æˆ–ä½¿ç”¨ <strong>è¾…åŠ©å‡½æ•°</strong> <code>mapActions</code>å»è§¦å‘ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> mapActions <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'vuex'</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  methods<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
      <span class="token string">'actionAdd'</span><span class="token punctuation">,</span> <span class="token comment">// å°† `this.actionAdd()` æ˜ å°„ä¸º `this.$store.dispatch('actionAdd')`</span>

      <span class="token comment">// `mapActions` ä¹Ÿæ”¯æŒè½½è·ï¼š</span>
      <span class="token string">'incrementBy'</span> <span class="token comment">// å°† `this.incrementBy(amount)` æ˜ å°„ä¸º `this.$store.dispatch('incrementBy', amount)`</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      add<span class="token punctuation">:</span> <span class="token string">'actionAdd'</span> <span class="token comment">// å°† `this.add()` æ˜ å°„ä¸º `this.$store.dispatch('increment')`</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>æ³¨æ„ï¼Œå½“ä½¿ç”¨<code>...mapActions</code>ä¼ å…¥<code>payload</code>æ—¶ï¼Œéœ€è¦åœ¨è§¦å‘æ–¹æ³•æ—¶ä¼ å…¥ã€‚å¦‚:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//...</span>
<span class="token operator">...</span><span class="token function">mapActions</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        add<span class="token punctuation">:</span> <span class="token string">'actionAdd'</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>åœ¨<code>&lt;template&gt;</code>ä¸­éœ€è¦ä¸º</p> <div class="language-html line-numbers-mode"><pre class="language-html"><code> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">@click</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>add(10)<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>add<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>//addå¦‚æœæ²¡æœ‰æ‹¬å·å’Œå‚æ•°ï¼Œvueä¼šéšå¼ä¼ å…¥Eventå¯¹è±¡
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><code>...mapActions</code>åªæ˜¯æä¾›ä¸€ä¸ªæ˜ å°„å…³ç³»ï¼Œå¯¹åº”çš„æ˜¯<code>this.add()</code>ï¼Œéœ€è¦å¸¦å‚æ•°å°±è¦åœ¨è§¦å‘è¿™ä¸ªæ–¹å¼æ—¶å¸¦ä¸Šã€‚</p> <h2 id="ç»„åˆ-action"><a href="#ç»„åˆ-action" class="header-anchor">#</a> ç»„åˆ Action</h2> <blockquote><p><code>Action</code>æ˜¯ä¸€ä¸ªå¼‚æ­¥çš„æ“ä½œï¼Œ<code>dispatch</code>å¯ä»¥å¤„ç†actionçš„å›è°ƒå‡½æ•°è¿”å›çš„<code>promiseå¯¹è±¡</code>ï¼Œè€Œä¸”å®ƒ<code>(store.dispatch)</code>ä»ç„¶ä¼šè¿”å›ä¸€ä¸ª<code>promise</code>å¯¹è±¡ã€‚</p></blockquote> <p>è¿™ä¸ªå®˜æ–¹çš„è§£é‡Šæœ‰ç‚¹ç»•ï¼Œæˆ‘çš„ç†è§£æ˜¯ï¼šä½ å¯ä»¥åœ¨actioné‡Œå®šä¹‰promiseå¯¹è±¡ç»™dispatchï¼Œdispatchå¯ä»¥å¤„ç†ï¼Œç„¶åæˆ‘ä¹Ÿæ˜¯è¿”å›promiseå¯¹è±¡ç»™ä½ ã€‚</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token function">actionA</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve<span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'someMutation'</span><span class="token punctuation">)</span>
        <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>ç„¶åä½ å¯ä»¥</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>  store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'actionA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>actionAè¿”å›ä¸€ä¸ªpromiseå¯¹è±¡ï¼Œdispatchåœ¨æ¥å—è¿™ä¸ªactionæ—¶ï¼ŒæŠŠå®ƒè‡ªèº«è¿”å›å€¼ä¹Ÿå˜æˆpromiseå¯¹è±¡ï¼Œå› æ­¤ä½ å¯ä»¥ä½¿ç”¨promiseä¸­çš„<code>then</code>å’Œ<code>catch</code>å»å¤„ç†å¼‚æ­¥æ“ä½œã€‚</p> <p>ä¹Ÿå¯ä»¥åœ¨actionä¸­è¿”å›å¦ä¸€ä¸ªaction</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
<span class="token comment">// ...</span>
  <span class="token function">actionB</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'actionA'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'xxx'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>ä½¿ç”¨ aysnc/await å¯ä»¥æ›´åŠ ä¼˜é›…çš„å®ç°</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// å‡è®¾ getData() å’Œ getOtherData() è¿”å›çš„æ˜¯ Promise</span>
actions<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  <span class="token keyword">async</span> <span class="token function">actionA</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'gotData'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> <span class="token function">getData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token keyword">async</span> <span class="token function">actionB</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> dispatch<span class="token punctuation">,</span> commit <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'actionA'</span><span class="token punctuation">)</span> <span class="token comment">// ç­‰å¾… actionA å®Œæˆ</span>
    <span class="token function">commit</span><span class="token punctuation">(</span><span class="token string">'gotOtherData'</span><span class="token punctuation">,</span> <span class="token keyword">await</span> <span class="token function">getOtherData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/HaoXiangL/HaoXiangL.github.io/edit/master/vuex/action.md" target="_blank" rel="noopener noreferrer">ç¼–è¾‘è¯¥åšå®¢ â†’</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/vuex/mutation.html" class="prev">Mutation</a></span> <!----></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.85a488a3.js" defer></script><script src="/assets/js/2.d553369a.js" defer></script><script src="/assets/js/16.f9b239cd.js" defer></script>
  </body>
</html>
